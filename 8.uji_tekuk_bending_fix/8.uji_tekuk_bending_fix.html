<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kalkulator Radius Tekukan</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .result-value {
      color: green;
      font-weight: bold;
    }
    .formula-text {
      font-style: italic;
      margin-top: 10px;
    }
    .formula-text span {
      color: green;
      font-weight: bold;
    }
    .content-border {
      padding: 2rem;
      margin: 1rem 0;
      background-color: #f8f9fa;
    }
    .header-line {
      border-bottom: 2px solid #dee2e6;
      padding-bottom: 1rem;
      margin-bottom: 2rem;
    }
    .footer-line {
      border-top: 2px solid #dee2e6;
      padding-top: 0.5rem;
      margin-top: 1rem;
    }
    .btn-custom {
      margin: 0 10px;
      min-width: 120px;
    }

    /* Pertahankan tampilan desktop di mobile */
    @media (max-width: 768px) {
      .row-cols-2 > .col {
        flex: 0 0 50%;
        max-width: 50%;
      }
      .row-cols-3 > .col {
        flex: 0 0 33.3333%;
        max-width: 33.3333%;
      }
    }
  </style>
</head>
<body style="background-color: #f1f3f5;">
  <div class="container mt-5 mb-5 px-2 px-md-4">
    <div class="content-border">
      <div class="header-line">
        <h2 class="text-center mb-0">Kalkulator Radius Tekukan</h2>
      </div>

      <!-- Input Fields -->
      <div class="row row-cols-2 g-3">
        <div class="col">
          <label for="tipeKabel" class="form-label">Tipe Kabel</label>
          <select id="tipeKabel" class="form-select">
            <option value="lead">Dengan Lead Sheath/Lapisan Logam</option>
            <option value="lain">Kabel Lain</option>
          </select>
        </div>

        <div class="col">
          <label for="jumlahInti" class="form-label">Jumlah Inti</label>
          <select id="jumlahInti" class="form-select">
            <option value="tunggal">Inti Tunggal</option>
            <option value="tiga">Tiga Inti</option>
          </select>
        </div>

        <div class="col">
          <label for="diameterKonduktor" class="form-label">Diameter Konduktor (mm)</label>
          <input type="number" class="form-control" id="diameterKonduktor" />
        </div>

        <div class="col">
          <label for="diameterKabel" class="form-label">Diameter Kabel (mm)</label>
          <input type="number" class="form-control" id="diameterKabel" />
        </div>
      </div>

      <!-- Output Results -->
      <div class="row row-cols-3 g-3 mt-2">
        <div class="col">
          <label class="form-label">Min. Radius Tekukan (mm)</label>
          <input type="text" class="form-control result-value" id="minRadius" readonly />
        </div>
        <div class="col">
          <label class="form-label">Nom. Radius Tekukan (mm)</label>
          <input type="text" class="form-control result-value" id="nomRadius" readonly />
        </div>
        <div class="col">
          <label class="form-label">Max. Radius Tekukan (mm)</label>
          <input type="text" class="form-control result-value" id="maxRadius" readonly />
        </div>
      </div>

      <!-- Formula Info -->
      <div class="row mt-2">
        <div class="col">
          <p class="formula-text"><strong>Formula:</strong> <span id="formulaText"></span></p>
        </div>
      </div>

      <!-- Buttons -->
      <div class="row row-cols-2 g-3 mt-3">
        <div class="col text-center">
          <button type="button" class="btn btn-outline-secondary btn-custom rounded-pill w-100" onclick="goBack()">Kembali</button>
        </div>
        <div class="col text-center">
          <button type="button" class="btn btn-primary btn-custom rounded-pill w-100" onclick="goHome()">Beranda</button>
        </div>
      </div>

      <!-- Footer -->
      <div class="row mt-3">
        <div class="col">
          <div class="footer-line">
            <footer class="text-center text-muted">
              Williyanto Adi 2025
            </footer>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tipeKabel = document.getElementById("tipeKabel");
    const jumlahInti = document.getElementById("jumlahInti");
    const diameterKonduktor = document.getElementById("diameterKonduktor");
    const diameterKabel = document.getElementById("diameterKabel");
    const minRadius = document.getElementById("minRadius");
    const maxRadius = document.getElementById("maxRadius");
    const nomRadius = document.getElementById("nomRadius");
    const formulaText = document.getElementById("formulaText");

    function hitungRadius() {
      const d = parseFloat(diameterKonduktor.value) || 0;
      const D = parseFloat(diameterKabel.value) || 0;
      const tipe = tipeKabel.value;
      const inti = jumlahInti.value;

      if (!d || !D) {
        minRadius.value = "";
        maxRadius.value = "";
        nomRadius.value = "";
        formulaText.innerHTML = "";
        return;
      }

      let faktor = 0;
      let formula = "";

      if (tipe === "lead" && inti === "tunggal") {
        faktor = 25;
        formula = "25 (d + D) ± 5%";
      } else if (tipe === "lead" && inti === "tiga") {
        faktor = 20;
        formula = "20 (d + D) ± 5%";
      } else if (tipe === "lain" && inti === "tunggal") {
        faktor = 20;
        formula = "20 (d + D) ± 5%";
      } else if (tipe === "lain" && inti === "tiga") {
        faktor = 15;
        formula = "15 (d + D) ± 5%";
      }

      const base = d + D;
      const min = (base - 0.05 * base) * faktor;
      const max = (base + 0.05 * base) * faktor;
      const nom = (min + max) / 2;

      minRadius.value = min.toFixed(0);
      maxRadius.value = max.toFixed(0);
      nomRadius.value = nom.toFixed(0);
      formulaText.innerHTML = `<span>${formula}</span>`;
    }

    tipeKabel.addEventListener("change", hitungRadius);
    jumlahInti.addEventListener("change", hitungRadius);
    diameterKonduktor.addEventListener("input", hitungRadius);
    diameterKabel.addEventListener("input", hitungRadius);

    function goBack() {
      if (window.history.length > 1) {
        window.history.back();
      } else {
        alert("Tidak ada halaman sebelumnya untuk dikunjungi");
      }
    }

    function goHome() {
      window.location.href = "/";
    }
  </script>
</body>
</html>